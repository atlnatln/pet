# ==============================================================================
# ğŸ¾ Pre-commit Hooks - Code Quality Automation
# ==============================================================================
# Otomatik kod kalitesi kontrolÃ¼ iÃ§in pre-commit hooks
# ==============================================================================

repos:
  # ==============================================================================
  # ğŸ”§ BASIC CHECKS - Temel kontroller
  # ==============================================================================
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.4.0
    hooks:
      - id: trailing-whitespace
        name: ğŸ§¹ Remove trailing whitespace
        description: SatÄ±r sonlarÄ±ndaki boÅŸluklarÄ± temizle
        
      - id: end-of-file-fixer
        name: ğŸ“„ Fix end of files
        description: Dosya sonlarÄ±nÄ± dÃ¼zelt
        
      - id: check-yaml
        name: âœ… Check YAML syntax
        description: YAML dosyalarÄ±nÄ±n syntax'Ä±nÄ± kontrol et
        
      - id: check-json
        name: âœ… Check JSON syntax
        description: JSON dosyalarÄ±nÄ±n syntax'Ä±nÄ± kontrol et
        
      - id: check-toml
        name: âœ… Check TOML syntax
        description: TOML dosyalarÄ±nÄ±n syntax'Ä±nÄ± kontrol et
        
      - id: check-merge-conflict
        name: ğŸ”€ Check merge conflicts
        description: Merge conflict marker'larÄ±nÄ± kontrol et
        
      - id: check-added-large-files
        name: ğŸ“¦ Check large files
        description: BÃ¼yÃ¼k dosyalarÄ± kontrol et (>500KB)
        args: ['--maxkb=500']
        
      - id: debug-statements
        name: ğŸ› Check debug statements
        description: Debug statement'larÄ± kontrol et

  # ==============================================================================
  # ğŸ PYTHON CODE FORMATTING - Python kod formatlama
  # ==============================================================================
  - repo: https://github.com/psf/black
    rev: 23.3.0
    hooks:
      - id: black
        name: ğŸ–¤ Format Python code (Black)
        description: Python kodunu Black ile formatla
        language_version: python3
        args: [
          "--line-length=88",
          "--target-version=py311",
          "--include=\\.pyi?$",
          "--exclude=migrations/"
        ]

  # ==============================================================================
  # ğŸ“¦ IMPORT ORGANIZATION - Import dÃ¼zenleme
  # ==============================================================================
  - repo: https://github.com/pycqa/isort
    rev: 5.12.0
    hooks:
      - id: isort
        name: ğŸ“¦ Organize imports (isort)
        description: Python import'larÄ±nÄ± dÃ¼zenle
        args: [
          "--profile=black",
          "--line-length=88",
          "--multi-line=3",
          "--skip-glob=*/migrations/*",
          "--known-django=django",
          "--known-first-party=apps,config",
          "--section-default=THIRDPARTY"
        ]

  # ==============================================================================
  # ğŸ” PYTHON LINTING - Python kod analizi
  # ==============================================================================
  - repo: https://github.com/pycqa/flake8
    rev: 6.0.0
    hooks:
      - id: flake8
        name: ğŸ” Lint Python code (Flake8)
        description: Python kodunu Flake8 ile analiz et
        args: [
          "--max-line-length=88",
          "--extend-ignore=E203,W503,E501",
          "--exclude=migrations,venv,env,.venv,.env",
          "--per-file-ignores=__init__.py:F401",
          "--max-complexity=10"
        ]

  # ==============================================================================
  # ğŸ›¡ï¸ SECURITY CHECKS - GÃ¼venlik kontrolleri
  # ==============================================================================
  - repo: https://github.com/pycqa/bandit
    rev: 1.7.5
    hooks:
      - id: bandit
        name: ğŸ›¡ï¸ Security check (Bandit)
        description: Python kodunda gÃ¼venlik aÃ§Ä±klarÄ±nÄ± kontrol et
        args: [
          "-r", ".",
          "-f", "json",
          "-x", "*/tests/*,*/venv/*,*/env/*",
          "-ll",
          "-i"
        ]
        exclude: ^(tests/|venv/|env/|migrations/)

  # ==============================================================================
  # ğŸ“ DJANGO SPECIFIC - Django Ã¶zel kontroller
  # ==============================================================================
  - repo: local
    hooks:
      - id: django-check
        name: ğŸ¯ Django system check
        description: Django sistem kontrolÃ¼
        entry: python manage.py check
        language: system
        pass_filenames: false
        always_run: true
        
      - id: django-check-migrations
        name: ğŸ—„ï¸ Check Django migrations
        description: Django migration'larÄ±nÄ± kontrol et
        entry: python manage.py makemigrations --check --dry-run
        language: system
        pass_filenames: false
        files: ^.*models\.py$

  # ==============================================================================
  # ğŸ” SECRETS DETECTION - SÄ±r tespit etme
  # ==============================================================================
  - repo: https://github.com/Yelp/detect-secrets
    rev: v1.4.0
    hooks:
      - id: detect-secrets
        name: ğŸ” Detect secrets
        description: Kodda sÄ±r/ÅŸifre tespiti
        args: ['--baseline', '.secrets.baseline']
        exclude: .*\.lock$|.*requirements.*\.txt$

  # ==============================================================================
  # ğŸ“„ DOCUMENTATION - DokÃ¼mantasyon kontrolleri
  # ==============================================================================
  - repo: https://github.com/pycqa/pydocstyle
    rev: 6.3.0
    hooks:
      - id: pydocstyle
        name: ğŸ“„ Check docstrings (pydocstyle)
        description: Python docstring'lerini kontrol et
        args: [
          "--convention=google",
          "--ignore=D100,D101,D102,D103,D104,D105,D106,D107",
          "--match-dir=^(?!migrations).*"
        ]

  # ==============================================================================
  # ğŸ³ DOCKER - Docker dosya kontrolleri
  # ==============================================================================
  - repo: https://github.com/hadolint/hadolint
    rev: v2.12.0
    hooks:
      - id: hadolint-docker
        name: ğŸ³ Lint Dockerfile (Hadolint)
        description: Dockerfile'larÄ± kontrol et
        args: [
          "--ignore", "DL3008",  # Pin package versions
          "--ignore", "DL3009",  # Delete apt cache
          "--ignore", "SC2046"   # Quote parameters
        ]

  # ==============================================================================
  # ğŸ“Š TYPE CHECKING - Tip kontrolÃ¼
  # ==============================================================================
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.3.0
    hooks:
      - id: mypy
        name: ğŸ“Š Type check (MyPy)
        description: Python tip kontrolÃ¼
        additional_dependencies: [
          'django-stubs[compatible-mypy]',
          'djangorestframework-stubs',
          'types-requests',
          'types-redis'
        ]
        args: [
          "--ignore-missing-imports",
          "--no-strict-optional",
          "--warn-redundant-casts",
          "--warn-unused-ignores"
        ]
        exclude: ^(migrations/|venv/|env/)

# ==============================================================================
# âš™ï¸ PRE-COMMIT CONFIGURATION
# ==============================================================================
default_stages: [commit, push]
fail_fast: false

# Exclude patterns
exclude: |
  (?x)^(
      migrations/.*|
      venv/.*|
      env/.*|
      node_modules/.*|
      \.venv/.*|
      staticfiles/.*|
      media/.*
  )$

# ==============================================================================
# ğŸ’ PLATFORM MESSAGE
# ==============================================================================
# Bu pre-commit configuration, kod kalitesini otomatik olarak
# kontrol eder ve platformun tutarlÄ± development standartlarÄ±nÄ± saÄŸlar.
# ğŸ¾ Her commit, kaliteli kod iÃ§in!
